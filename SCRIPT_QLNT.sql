CREATE DATABASE QLNT
GO
USE QLNT
GO
--CREATE TABLE
CREATE TABLE KV_LUUTRUTHUOC 
(
	MA_KHUVUC VARCHAR(10) NOT NULL PRIMARY KEY,
	TEN_KHUVUC NVARCHAR(30),
)
CREATE TABLE THUOC
(
	MA_THUOC VARCHAR(10) NOT NULL PRIMARY KEY,
	TEN_THUOC NVARCHAR(30)  not null,
	GIA_BAN INT,
	DON_VI_TINH NVARCHAR(10) ,
	SL_TON INT ,
	MA_KHUVUC VARCHAR(10),
	foreign key(MA_KHUVUC) references KV_LUUTRUTHUOC(MA_KHUVUC) 
)
CREATE TABLE NHACUNGCAP (
	MA_NCC VARCHAR(10) NOT NULL PRIMARY KEY,
	TEN_NCC NVARCHAR(30) ,
	SDT_NCC VARCHAR (11),
	DIA_CHI NVARCHAR(50) ,
) 
CREATE TABLE KHACHHANG (
	MA_KHACHHANG VARCHAR(10) NOT NULL PRIMARY KEY,
	TEN_KHACHHANG NVARCHAR(30),
	GIOI_TINH NVARCHAR (10),
	KH_NGAYSINH DATE,
	SDT_KHACH VARCHAR(11),
	BENH_LI NVARCHAR(100),
) 
CREATE TABLE NHANVIEN (
	MA_NHANVIEN VARCHAR(10) NOT NULL PRIMARY KEY,
	TEN_NHANVIEN NVARCHAR(30),
	GIOI_TINH NVARCHAR (10),
	NV_NGAYSINH DATE,
	SDT_NHANVIEN VARCHAR(11),
	BANG_CAP NVARCHAR(20),
	TINH_TRANG NVARCHAR(20)
)
CREATE TABLE HOADON (
	MA_HOADON VARCHAR(10) NOT NULL primary key,
	MA_KHACHHANG VARCHAR(10) NOT NULL,
	MA_NHANVIEN VARCHAR(10) NOT NULL,
	NGAY_LAP DATETIME,
	TONG_TIEN MONEY
) 
Alter table HOADON add  foreign key(MA_NHANVIEN) references NHANVIEN (MA_NHANVIEN) 
Alter table HOADON add  foreign key(MA_KHACHHANG) references KHACHHANG (MA_KHACHHANG) 
CREATE TABLE CT_HOADON (
	MA_HOADON VARCHAR(10) NOT NULL,
	MA_THUOC VARCHAR(10) NOT NULL,
	SO_LUONG INT,
	THANH_TIEN MONEY,
	PRIMARY KEY (MA_THUOC,MA_HOADON)
)
Alter table CT_HOADON add  foreign key(MA_THUOC) references THUOC (MA_THUOC) 
Alter table CT_HOADON add  foreign key(MA_HOADON) references HOADON (MA_HOADON)
CREATE TABLE DONDATTHUOC (
	MA_DONDAT VARCHAR(10) NOT NULL PRIMARY KEY,
	MA_NHANVIEN VARCHAR(10) NOT NULL,
	MA_NCC VARCHAR(10) NOT NULL,
	NGAY_LAP DATETIME,
)
Alter table DONDATTHUOC add  foreign key(MA_NCC) references NHACUNGCAP (MA_NCC) 
Alter table DONDATTHUOC add  foreign key(MA_NHANVIEN) references NHANVIEN (MA_NHANVIEN) 
CREATE TABLE CT_DONDAT (
	MA_DONDAT VARCHAR(10) NOT NULL,
	MA_THUOC VARCHAR(10) NOT NULL,
	SL_DAT INT,
	PRIMARY KEY(MA_DONDAT,MA_THUOC)
) 
Alter table CT_DONDAT add  foreign key(MA_THUOC) references THUOC (MA_THUOC) 
Alter table CT_DONDAT add  foreign key(MA_DONDAT) references DONDATTHUOC (MA_DONDAT)
CREATE TABLE DANGNHAP (
	TAIKHOAN VARCHAR(10) PRIMARY KEY NOT NULL ,
	MATKHAU VARCHAR(20) NOT NULL ,
	PHANLOAI TINYINT NOT NULL,
	MA_NHANVIEN VARCHAR(10),
	PQ_THUOC TINYINT,
	PQ_NHANVIEN TINYINT,
	PQ_KVLT TINYINT,
	PQ_KHACHHANG TINYINT,
	PQ_NCC TINYINT,
	PQ_HOADON TINYINT,
	PQ_DONDATTHUOC TINYINT,
	foreign key(MA_NHANVIEN) references NHANVIEN(MA_NHANVIEN) 
)
--KHU VỰC
INSERT KV_LUUTRUTHUOC(MA_KHUVUC,TEN_KHUVUC) VALUES
('KVLT000001',N'Quầy'),
('KVLT000002',N'Kho')
--thuoc Viên
INSERT THUOC(MA_THUOC,TEN_THUOC,GIA_BAN,DON_VI_TINH,SL_TON,MA_KHUVUC) VALUES 
('DQG0000001',N'Thevapop',10000,N'Viên',5000,'KVLT000001'),
('DQG0000002',N'Bisoprolol Plus HCT 5/6.25',30000,N'Viên',400,'KVLT000002'),
('DQG0000003',N'Paracetamol 500 mg',10000,N'Viên',3000,'KVLT000001'),
('DQG0000004',N'SaViDronat',32000,N'Viên',200,'KVLT000002'),
('DQG0000005',N'Vitamin B2',5000,N'Viên',4000,'KVLT000001'),
('DQG0000006',N'Hoạt huyết dưỡng não HĐ',16000	,N'Viên',4600,'KVLT000001'),
-- thuốc mCi
('DQG0000007',N'Iode 131 (I-131)',13000,N'mCi',600,'KVLT000002'),
('DQG0000008',N'Gentech molybdenum ',15000,N'mCi',800,'KVLT000001'),
('DQG0000009',N'CAPSION',12500,N'mCi',600,'KVLT000002'),
('DQG0000010',N'ELUMATIC III',6000,N'mCi',3000,'KVLT000001'),
--thuốc Lọ
('DQG0000011',N'STAMICIS',45000,N'Lọ',500,'KVLT000002'),
('DQG0000012',N'Cefradin VCP',65000,N'Lọ',200,'KVLT000002'),
('DQG0000013',N'Ceftezol 1g',13000,N'Lọ',2015,'KVLT000001'),
('DQG0000014',N'Huyết thanh kháng nọc',200000,N'Lọ',150,'KVLT000001'),
('DQG0000015',N'Nước Oxy già 3%',20000,N'Lọ',500,'KVLT000001'),
('DQG0000016',N'Cồn 70',16000,N'Lọ',500,'KVLT000002'),
--thuốc Ống
('DQG0000017',N'Rasanvisc',20000,N'Ống',2000,'KVLT000002'),
('DQG0000018',N'Bổ trung ích khí',15000,N'Ống',3000,'KVLT000001'),
('DQG0000019',N'Nước cất pha tiêm',5000,N'Ống',5432,'KVLT000001'),
('DQG0000020',N'Nước vô khuẩn để tiêm',24000,N'Ống',1650,'KVLT000002'),
('DQG0000021',N'Oxacilin',1000,N'Ống',2345,'KVLT000001'),
('DQG0000022',N'Vinphacol - 10mg/ml',26000,N'Ống',9000,'KVLT000002'),
--thuốc Hộp
('DQG0000023',N'OTUNA 1%',85000,N'Hộp',250,'KVLT000001'),
('DQG0000024',N'Hoàn bổ thận âm',100000,N'Hộp',150,'KVLT000002'),
('DQG0000025',N'Cao sao vàng',50000,N'Hộp',580,'KVLT000001'),
('DQG0000026',N'Đại tràng hoàn P/H',25000,N'Hộp',950,'KVLT000001'),
('DQG0000027',N'Hoạt huyết thông mạch P/H',85000,N'Hộp',250,'KVLT000002'),
('DQG0000028',N'Viên sáng mắt',450000,N'Hộp',1250,'KVLT000002'),
--thuốc Chai
('DQG0000029',N'Zinco',14000,N'Chai',850,'KVLT000001'),
('DQG0000030',N'CAO PHONG THẤP 200ML',25000,N'Chai',1264,'KVLT000001'),
('DQG0000031',N'DẦU KHUYNH DIỆP OPC 15ml',12500,N'Chai',600,'KVLT000001'),
('DQG0000032',N'Thuốc nước THUỐC HO TRẺ EM',35000,N'Chai',1850,'KVLT000002'),
('DQG0000033',N'Dầu gió nâu 10ml',25000,N'Chai',450,'KVLT000001'),
('DQG0000034',N'Thuốc ho Hoapharm',35000,N'Chai',5600,'KVLT000002'),
--thuốc Tuýp
('DQG0000035',N'Akneyash',25000,N'Tuýp',600,'KVLT000002'),
('DQG0000036',N'Kem Zonaarme',15000,N'Tuýp',653,'KVLT000002'),
('DQG0000037',N'Thuốc mỡ Tacropic',16000,N'Tuýp',550,'KVLT000001'),
('DQG0000038',N'Thuốc kem Vaselin',25000,N'Tuýp',300,'KVLT000001'),
('DQG0000039',N'Kem bôi da Hemprenol',35000,N'Tuýp',250,'KVLT000001'),
('DQG0000040',N'Thuốc kem bôi da AVI-05',14500,N'Tuýp',355,'KVLT000002'),
--thuốc Miếng
('DQG0000041',N'Thalapas',12000,N'Miếng',2340,'KVLT000002'),
('DQG0000042',N'Cao trăn',20000,N'Miếng',1205,'KVLT000001'),
('DQG0000043',N'Cao ban long',22000,N'Miếng',1000,'KVLT000002'),
('DQG0000044',N'Cao dán cốt thông',35000,N'Miếng',450,'KVLT000002'),
('DQG0000045',N'Thuốc dán con Rít',21000,N'Miếng',300,'KVLT000001'),
('DQG0000046',N'Yaguchi',3500,N'Miếng',440,'KVLT000001')
--nha cung cap
INSERT NHACUNGCAP(MA_NCC,TEN_NCC,SDT_NCC,DIA_CHI) VALUES 
('NCC0000001',N'Phùng Xuân Đ','0784806354',N'3, đường 3, phường Linh Tây, TP.Thủ Đức'),
('NCC0000002',N'Huỳnh Hải Đ', '0784812312',N'1, đường 4, phường Linh Trung, TP.Thủ Đức'),
('NCC0000003',N'Trần Công M', '0234234354',N'2, đường 5, phường Linh Đông, TP.Thủ Đức'),
('NCC0000004',N'Nguyễn Ngô S','0784346679',N'4, đường 6, phường Linh Linh, TP.Thủ Đức'),
('NCC0000005',N'Lưu Thanh H', '0734234354',N'8, đường 7, phường Linh Chi, TP.Thủ Đức'),
('NCC0000006',N'Nguyễn Huy H','0784678354',N'9, đường 8, phường Linh Miu, TP.Thủ Đức')
--nhan vien
INSERT NHANVIEN(MA_NHANVIEN,TEN_NHANVIEN,GIOI_TINH,NV_NGAYSINH,SDT_NHANVIEN,BANG_CAP,TINH_TRANG) VALUES 
('NV00000000',N'None',N'None','19990101','None',N'None',N'None'),
('AD00000000',N'Trần Công Minh',N'Nam','20011212','0784854612',N'Viện Trưởng',N'Hoạt động'),
('NV00000001',N'Nguyễn Văn A',N'Nam','19990115','0784885236',N'Dược tá',N'Đã nghỉ'),
('NV00000002',N'Trần Đình B',N'Nam','19991201','0963852354',N'Dược tá',N'Hoạt động'),
('NV00000003',N'Võ Thị H',N'Nữ','20020508','0788524154',N'Dược tá',N'Đã nghỉ'),
('NV00000004',N'Nguyễn Phương H',N'Nữ','19970130','0781234564',N'Dược sĩ trung cấp',N'Hoạt động'),
('NV00000005',N'Phan Xích L',N'Nam','19981216','0784562354',N'Dược sĩ trung cấp',N'Hoạt động'),
('NV00000006',N'Phan Xích L',N'Nữ','20030205','0784889564',N'Dược sĩ',N'Đã nghỉ')
--khach hang
INSERT KHACHHANG(MA_KHACHHANG,TEN_KHACHHANG,GIOI_TINH,KH_NGAYSINH,SDT_KHACH,BENH_LI) VALUES 
('KH00000000',N'None','None','19990101',N'None',N'None'),
('KH00000001',N'Phùng Xuân Đoan',N'Nam','20040205','0784806354',N'Trầm cảm, hay ho, ảo tưởng'),
('KH00000002',N'Huỳnh Hải Đăng',N'Nam','19940201','0784806355',N'Đau bụng thường xuyên'),
('KH00000003',N'Trần Công Minh',N'Nữ','19961106','0784801324',N'Đau tay nhức xương khớp'),
('KH00000004',N'Nguyễn Ngô Thanh Sinh',N'Nam','20040607','0784236354',N''),
('KH00000005',N'Lưu Thanh Hậu',N'Nam','20050708','0783456354',N''),
('KH00000006',N'Nguyễn Huy Hoàng',N'Nam','20070325','0784485677',N'Nhức mắt'),
('KH00000007',N'Nguyễn Phương Vy',N'Nữ','20100226','0784887654',N'plap pla pla hay ho'),
('KH00000008',N'Vũ Thị Diễm Linh',N'Nữ','19990716','0789876554',N'Lùn, Hay chụp hình hack chân'),
('KH00000009',N'Võ Thị Mỹ Hằng',N'Nữ','19981212','0868781832',N'Bị dễ thương, xinh sịn mịn'),
('KH00000010',N'Nguyễn Thanh Đăng',N'Nam','20010515','0784805436',N'Hay đau nhức xương khớp mỏi dò'),
('KH00000011',N'Phan Minh Trí',N'Nữ','20030205','0784807658',N'Đau chân'),
('KH00000012',N'Nguyễn Huỳnh Minh Phát',N'Nam','20010205','0788765454',N'Đau lưng')

--truy vấn
select * from KHACHHANG where TEN_KHACHHANG LIKE '%Minh%'
--ĐƠN ĐẶT
INSERT DONDATTHUOC(MA_DONDAT,MA_NHANVIEN,MA_NCC,NGAY_LAP) VALUES
('DD00000001',N'AD00000000','NCC0000001','20210508'),
('DD00000002',N'AD00000000','NCC0000002','20200605'),
('DD00000003',N'AD00000000','NCC0000001','20191215'),
('DD00000004',N'AD00000000','NCC0000003','20210605')
--CT ĐƠN ĐẶT
INSERT CT_DONDAT(MA_DONDAT,MA_THUOC,SL_DAT) VALUES
('DD00000001',N'DQG0000035',5),
('DD00000002',N'DQG0000035',10),
('DD00000002',N'DQG0000030',20),
('DD00000003',N'DQG0000035',5),
('DD00000004',N'DQG0000011',14),
('DD00000004',N'DQG0000030',2)
--HÓA ĐƠN
INSERT HOADON(MA_HOADON,MA_KHACHHANG,MA_NHANVIEN,NGAY_LAP,TONG_TIEN) VALUES 
('MHD0000001','KH00000001','NV00000004','20211026',NULL),
('MHD0000002','KH00000004','NV00000004','20211026',NULL),
('MHD0000003','KH00000004','NV00000004','20211026',NULL),
('MHD0000004','KH00000004','NV00000005','20211026',NULL)
--CT HÓA ĐƠN
INSERT CT_HOADON(MA_HOADON,MA_THUOC,SO_LUONG,THANH_TIEN) VALUES 
('MHD0000001','DQG0000030',3,NULL),
('MHD0000002','DQG0000012',1,NULL),
('MHD0000002','DQG0000020',1,NULL),
('MHD0000003','DQG0000015',2,NULL),
('MHD0000003','DQG0000016',3,NULL),
('MHD0000004','DQG0000017',4,NULL)
--dang nhap

INSERT DANGNHAP VALUES ('admin','admin',1,'AD00000000',1,1,1,1,1,1,1);
--INSERT DANGNHAP VALUES ('user1','user1',2,'NV00000001',1,1,1,1,1,1);
--INSERT DANGNHAP VALUES ('user2','user2',2,'NV00000002',1,1,1,1,1,1);
--INSERT DANGNHAP VALUES ('user3','user3',2,'NV00000003',1,1,1,1,1,1);
--INSERT DANGNHAP VALUES ('user4','user4',2,'NV00000004',1,1,1,1,1,1);
--INSERT DANGNHAP VALUES ('user5','user5',2,'NV00000005',1,1,1,1,1,1);
--XEM THÔNG TIN
SELECT * FROM KV_LUUTRUTHUOC
SELECT * FROM THUOC
SELECT * FROM NHACUNGCAP
SELECT * FROM KHACHHANG
SELECT * FROM NHANVIEN
SELECT * FROM DONDATTHUOC
SELECT * FROM CT_HOADON
SELECT * FROM CT_DONDAT
SELECT * FROM DANGNHAP
--DROP DATABASE
use master
drop database QLNT
--DROP TABLE
DROP TABLE DANGNHAP
DROP TABLE CT_DONDAT 
DROP TABLE CT_HOADON
DROP TABLE DONDATTHUOC
DROP TABLE HOADON
DROP TABLE NHANVIEN
DROP TABLE KHACHHANG
DROP TABLE NHACUNGCAP
DROP TABLE THUOC
DROP TABLE KV_LUUTRUTHUOC